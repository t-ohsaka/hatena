# テーブルロックと行ロック

## 結論

- テーブルロックは悪い子！行ロックは良い子！
- 更新したいレコードに対して行ロックをする！
- 明確な理由がない限り、ロックはしない方がいい！

## メモ

先輩(？)にテーブルロックと行ロックについて話を聞いた

例とかいろいろ聞いたことをメモしておく。

> この記事をご覧になってくださった方へ。もし、間違ったことを書いていましたら、ご指摘お願いします。

(1) Aさんがテーブルロックをしてしまうと、他の人がAさんが更新したい以外の行に対して、更新が行えなくなってしまう。これでは業務が止まってしまうため、テーブルロックはしないほうがいいっぽい

(2) もし、テーブル1の値をテーブル2に格納するときに、テーブル1の値が変わってほしくないときには行ロックをかける。逆に、テーブル1の値が変わっても問題ない場合には行ロックをかけない。

(3) 検索 → 更新 という感じで処理を行うときに、検索してから更新するまでに値が変わってほしくないときには行ロックをする。

